/*============================================================================================SCRIPT PARA CONTROLAR O CALENDARIO============================================================================================AUTOR: YUGIDATA: 20/06/2012ALTERAÇÕES: 22/06/2012============================================================================================*/var ldata = new Date();		//	data em foco do calendariovar myJobs= new Array(); 	//  controla a lista de tarefasvar listJobs= new Array(); 	//  lista de tarefas	// -----------------------------------------------------------------------------------------/*Esta função permite avançar ou retroceder o Mês no Calendário*/function changeMonth(tipo){	var hyear, hmonth;		hyear = data(3,ldata);		if (tipo == 1){		hmonth = Number(data(2,ldata))+1;	} else	{		hmonth = Number(data(2,ldata))-1;	}		if (hmonth > 12){		hmonth = 1;		hyear = Number(hyear)+1;	}	if (hmonth < 1){		hmonth = 12;		hyear = Number(hyear)-1;	}		if (hmonth < 10){		hmonth = "0" + hmonth;	}		ldata = new Date(hyear + "/" + hmonth + "/" + "/01");	calendar();}// ****************************************************************************function changeYear(tipo){	hano = data(3,ldata);	if (tipo == 1){		hano = Number(hano)+1;	} else	{		hano = Number(hano)-1;	}	hmes = data(2,ldata);	ldata = new Date(hano + "/" + hmes + "/" + "/01");	calendar();}// ****************************************************************************function mostra_data() {	//	 mostra data atual embaixo do calendário!!!	var cdata = data(1,ldata) + "/" + data(2,ldata) + "/" + data(3,ldata);	var m1 = cdata.substr(3,1);	var m2 = cdata.substr(4,1);	var a1 = cdata.substr(6,1);	var a2 = cdata.substr(7,1);	var a3 = cdata.substr(8,1);	var a4 = cdata.substr(9,1);		document.getElementById("month1").src="img/i" + m1 + ".png";	document.getElementById("month2").src="img/i" + m2 + ".png";	document.getElementById("year1").src="img/i" + a1 + ".png";	document.getElementById("year2").src="img/i" + a2 + ".png";	document.getElementById("year3").src="img/i" + a3 + ".png";	document.getElementById("year4").src="img/i" + a4 + ".png";}// -------------------------------------------------------------------------------------------function primeiro_dia() {	//	 retorna o dia da semana correspondente ao dia 1º do mes/ano corrente	fdia_semana = data(4,ldata) + 1; //	dia da semana da data atual.	fdia = data(1,ldata);	var ct = 0;	for (ct=fdia;ct>1;ct--){		fdia_semana--;		if (fdia_semana < 1) {			fdia_semana = 7;		}	}		return fdia_semana;}// -----------------------------------------------------------------------------------------	function calendar(){		mostra_data();	//	Mostra data embaixo do calendário		var hmes = data(2,ldata);		//	mes	var hano = data(3,ldata);		//  ano	var limite = mes_limite(hmes, hano);	// numero de dias do mês	var inicio = primeiro_dia();	var ct = 0;	for (ct=0;ct<42;ct++){	//	preenchendo dias de tarefas no novo JOB!!!		myJobs[ct] = -1;	}	// Verificando a posição inicial do dia da semana		for (ct=1;ct<inicio;ct++){		document.getElementById("img"+ct).src="img/n.png";	}		// Preenchendo o calendario:	limite = inicio + limite;	var jct = 1;		for (ct=inicio;ct<limite;ct++){		document.getElementById("img"+ct).src="img/" + jct + ".png";		myJobs[ct-1] = ct-1;	//	posicionando tarefas válidas!		jct++;	}	for (ct=limite;ct<42;ct++){		document.getElementById("img"+ct).src="img/n.png";	}}// --------------------------------------------------------------------------------------------function data(tipo, data) {	//	retorna a data atual (pode retornar separados dia, mes, ano ou dia da semana)		if (tipo == 0) {	//	se o tipo for zero retorna a data atual, caso contrario retorna a data do parametro		data = new Date();	}		dia = data.getDate();	mes = data.getMonth() + 1;	ano = data.getFullYear();	dia_semana = data.getDay();		if (dia < 10) {		dia = "0" + dia;	}	if (mes < 10) {		mes = "0" + mes;	}		if (tipo == 1) {		return dia;	} else if (tipo == 2) {		return mes;	} else if (tipo == 3) {				return ano;		} else if (tipo == 4) {				return dia_semana;		} else {			return dia+"/"+ mes +"/"+ano;	}}// ------------------------------------------------------------------------------------------function mes_limite(mes, ano) {		//	verifica o limite de dias de um mês num determinado ano	var limite = 0;		if (mes == 1 | mes == 3 | mes == 5 | mes == 7 | mes == 8 | mes == 10 | mes == 12 ) {		limite = 31;	} else if (mes == 2){			limite = 28;	} else {				limite = 30;		}	// Verificando ano bissexto:	if (mes == 2) {		if (ano % 100 == 0) {			if (ano % 400 == 0) {				limite = 29;			}			} else {			if (ano % 4 == 0) {				limite = 29;			}			}		}		return limite;}// ------------------------------------------------------------------------------------------// posiciona o calendario em uma data específicafunction goDate(){	var hmes = document.getElementById("month").value;	var hano = document.getElementById("year").value;		if (isNaN(hmes) == true ){		alert("O Mês deve ser um número!!!");		return;	}	if (isNaN(hano) == true ){		alert("O Ano deve ser um número!!!");		return;	}	if (hmes < 1 | hmes > 12) {		alert("O Mês é inválido!!!");		return;	}	if (hano < 1901 | hano > 2099) {		alert("O Ano é inválido!!!  [1901-2099] ");		return;	}	var tam = hano + "";		if (tam.length != 4) {		alert("O ano deve ter 4 dígitos!!!");		return;	}		if (hmes < 10) {		hmes = "0" + hmes;	}		ldata = new Date(hano + "/" + hmes + "/" + "/01");	calendar();}// *************************************************************************function addJobs(DayJob){	//	Adiciona tarefas na lista de tarefas		if (myJobs[DayJob] === -1){		// alert("Dia indisponível!!!")		return;	}				var hmes, ano, hdia, ct;	var ct2 = 1;		hmes = data(2,ldata);	hano = data(3,ldata);	hdia = 1;		// Verificando dia:		for (ct=0;ct<42;ct++){		if (myJobs[ct] != -1){			if (DayJob === myJobs[ct]){				hdia = ct2;				break;			} else {				ct2++;			}		}	}		if (hdia < 10) {		hdia = "0" + hdia;	}	var datajob = hano + "/" + hmes + "/" + hdia;	var dia_semana = data(4, new Date(datajob));		datajob = "<!-- " + hano + "/" + hmes + "/" + hdia + " -->";	datajob += "<span>" + hdia + "/" + hmes + "/" + hano + " - " + transfDayWeek(dia_semana) + "</span>";		var msg = prompt("Descrição da tarefa: [" + hdia + "/" + hmes + "/" + hano + "]");	if (msg == null){		return;	}		if (msg.length == 0){		alert("É preciso digitar a descrição da tarefa!!!");		return;	}		datajob = datajob + msg;	datajob = datajob + "<br>";		var tam = listJobs.length;	listJobs[tam] = datajob;		listJobs.sort();		datajob = "";	for (ct=0;ct<listJobs.length;ct++){		datajob = datajob + listJobs[ct];	}		document.getElementById("jobs").innerHTML=datajob;}// -----------------------------------------------------------------------------------------------function transfDayWeek(dia){	//	retorna nome do dia da semana	var nomeDia = "";		if (dia == 0){		nomeDia = "Domingo";	} else if (dia == 1){		nomeDia = "Segunda-Feira";	} else if (dia == 2){		nomeDia = "Terça-Feira";		} else if (dia == 3){		nomeDia = "Quarta-Feira";			} else if (dia == 4){		nomeDia = "Quinta-Feira";				} else if (dia == 5){		nomeDia = "Sexta-Feira";					} else if (dia == 6){		nomeDia = "Sábado";					}	return nomeDia;}// -----------------------------------------------------------------------------------------------------