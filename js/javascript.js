/*============================================================================================SCRIPT PARA CONTROLAR O CALENDARIO============================================================================================AUTOR: YUGIDATA: 20/06/2012ALTERAÇÕES: 22/06/2012============================================================================================*/var ldata = new Date();		//	data em foco do calendariovar myJobs= new Array(); 	//  controla a lista de tarefasvar listJobs= new Array(); 	//  lista de tarefas	/* --------------------------------------------------------------------------------------------[1][ changeMonth ]Esta função permite avançar ou retroceder o Mês no Calendário--------------------------------------------------------------------------------------------*/function changeMonth(tipo){	var hyear, hmonth;		hyear = infoDate(3,ldata);		if (tipo == 1){		hmonth = Number(infoDate(2,ldata))+1;	} else	{		hmonth = Number(infoDate(2,ldata))-1;	}		if (hmonth > 12){		hmonth = 1;		hyear = Number(hyear)+1;	}	if (hmonth < 1){		hmonth = 12;		hyear = Number(hyear)-1;	}		if (hmonth < 10){		hmonth = "0" + hmonth;	}		ldata = new Date(hyear + "/" + hmonth + "/" + "/01");	calendar();}/* --------------------------------------------------------------------------------------------[2][ changeYear ]Esta função permite avançar ou retroceder o Ano no Calendário--------------------------------------------------------------------------------------------*/function changeYear(tipo){	var hyear, hmonth; 	hyear = infoDate(3,ldata);		if (tipo == 1){		hyear = Number(hyear)+1;	} else	{		hyear = Number(hyear)-1;	}		hmonth = infoDate(2,ldata);	ldata = new Date(hyear + "/" + hmonth + "/" + "/01");	calendar();}/* --------------------------------------------------------------------------------------------[3][ showDate ]Esta função mostra a data atual debaixo do calendário--------------------------------------------------------------------------------------------*/function showDate() {	var cdata = infoDate(1,ldata) + "/" + infoDate(2,ldata) + "/" + infoDate(3,ldata);		document.getElementById("month1").src="img/i" + cdata.substr(3,1) + ".png";	document.getElementById("month2").src="img/i" + cdata.substr(4,1) + ".png";	document.getElementById("year1").src="img/i" + cdata.substr(6,1) + ".png";	document.getElementById("year2").src="img/i" + cdata.substr(7,1) + ".png";	document.getElementById("year3").src="img/i" + cdata.substr(8,1) + ".png";	document.getElementById("year4").src="img/i" + cdata.substr(9,1) + ".png";}/* --------------------------------------------------------------------------------------------[4][ firstDay ]Esta função retorna o dia da semana do primeiro dia do Mês da data em foco--------------------------------------------------------------------------------------------*/function firstDay() {		var fday_week = infoDate(4,ldata); 		// dia da semana da data atual.	var fday = infoDate(1,ldata);			// dia da data atual. 	var ct = 0;		for (ct=fday;ct>1;ct--){		fday_week--;		if (fday_week < 0) {			fday_week = 6;		}	}		return fday_week;}/* --------------------------------------------------------------------------------------------[5][ calendar ]Mostra e atualiza o calendário--------------------------------------------------------------------------------------------*/function calendar(){	var hmonth = infoDate(2,ldata);			var hyear = infoDate(3,ldata);			var totalDays = mes_limite(hmonth, hyear);	var startDay = firstDay();	var ct = 0;	// mostrando data		showDate();			// limpando calendario de tarefas e criando novo JOB vazio	for (ct=0;ct<42;ct++){			myJobs[ct] = -1;		document.getElementById("img"+ct).src="img/n.png";	}		// Preenchendo o calendario	totalDays = totalDays + startDay;	var jct = 1;		// catalogando tarefas	for (ct=startDay;ct<totalDays;ct++){		document.getElementById("img"+ct).src="img/" + jct + ".png";		myJobs[ct] = ct;				jct++;	}}/* --------------------------------------------------------------------------------------------[6][ infoDate ]Esta função retorna dados de uma data qualquer de acordo com o parametro <tipo>	<tipo> = 1 : retorna DD	<tipo> = 2 : retorna MM		<tipo> = 3 : retorna AAAA	<tipo> = 4 : retorna DIA DA SEMANA	<tipo> = ? : retorna DD/MM/AAAA		Se o parametro data não for informado entao retorna os dados da data do sistema--------------------------------------------------------------------------------------------*/function infoDate(tipo, data) {			if (data.length == 0) {			data = new Date();	}		var hday = data.getDate();	var hmonth = data.getMonth() + 1;	var hyear = data.getFullYear();	var hdayWeek = data.getDay();		if (hday < 10) {		hday = "0" + hday;	}	if (hmonth < 10) {		hmonth = "0" + hmonth;	}		if (tipo == 1) {		return hday;	} else if (tipo == 2) {		return hmonth;	} else if (tipo == 3) {				return hyear;		} else if (tipo == 4) {				return hdayWeek;		} else {			return hday + "/" + hmonth + "/" + hyear;	}}// ------------------------------------------------------------------------------------------function mes_limite(mes, ano) {		//	verifica o limite de dias de um mês num determinado ano	var limite = 0;		if (mes == 1 | mes == 3 | mes == 5 | mes == 7 | mes == 8 | mes == 10 | mes == 12 ) {		limite = 31;	} else if (mes == 2){			limite = 28;	} else {				limite = 30;		}	// Verificando ano bissexto:	if (mes == 2) {		if (ano % 100 == 0) {			if (ano % 400 == 0) {				limite = 29;			}			} else {			if (ano % 4 == 0) {				limite = 29;			}			}		}		return limite;}// ------------------------------------------------------------------------------------------// posiciona o calendario em uma data específicafunction goDate(){	var hmes = document.getElementById("month").value;	var hano = document.getElementById("year").value;		if (isNaN(hmes) == true ){		alert("O Mês deve ser um número!!!");		return;	}	if (isNaN(hano) == true ){		alert("O Ano deve ser um número!!!");		return;	}	if (hmes < 1 | hmes > 12) {		alert("O Mês é inválido!!!");		return;	}	if (hano < 1901 | hano > 2099) {		alert("O Ano é inválido!!!  [1901-2099] ");		return;	}	var tam = hano + "";		if (tam.length != 4) {		alert("O ano deve ter 4 dígitos!!!");		return;	}		if (hmes < 10) {		hmes = "0" + hmes;	}		ldata = new Date(hano + "/" + hmes + "/" + "/01");	calendar();}// *************************************************************************function addJobs(DayJob){	//	Adiciona tarefas na lista de tarefas		if (myJobs[DayJob] === -1){		// alert("Dia indisponível!!!")		return;	}				var hmes, ano, hdia, ct;	var ct2 = 1;		hmes = infoDate(2,ldata);	hano = infoDate(3,ldata);	hdia = 1;		// Verificando dia:		for (ct=0;ct<42;ct++){		if (myJobs[ct] != -1){			if (DayJob === myJobs[ct]){				hdia = ct2;				break;			} else {				ct2++;			}		}	}		if (hdia < 10) {		hdia = "0" + hdia;	}	var datajob = hano + "/" + hmes + "/" + hdia;	var dia_semana = infoDate(4, new Date(datajob));		datajob = "<!-- " + hano + "/" + hmes + "/" + hdia + " -->";	datajob += "<span>" + hdia + "/" + hmes + "/" + hano + " - " + transfDayWeek(dia_semana) + "</span>";		var msg = prompt("Descrição da tarefa: [" + hdia + "/" + hmes + "/" + hano + "]");	if (msg == null){		return;	}		if (msg.length == 0){		alert("É preciso digitar a descrição da tarefa!!!");		return;	}		datajob = datajob + msg;	datajob = datajob + "<br>";		var tam = listJobs.length;	listJobs[tam] = datajob;		listJobs.sort();		datajob = "";	for (ct=0;ct<listJobs.length;ct++){		datajob = datajob + listJobs[ct];	}		document.getElementById("jobs").innerHTML=datajob;}// -----------------------------------------------------------------------------------------------function transfDayWeek(dia){	//	retorna nome do dia da semana	var nomeDia = "";		if (dia == 0){		nomeDia = "Domingo";	} else if (dia == 1){		nomeDia = "Segunda-Feira";	} else if (dia == 2){		nomeDia = "Terça-Feira";		} else if (dia == 3){		nomeDia = "Quarta-Feira";			} else if (dia == 4){		nomeDia = "Quinta-Feira";				} else if (dia == 5){		nomeDia = "Sexta-Feira";					} else if (dia == 6){		nomeDia = "Sábado";					}	return nomeDia;}// -----------------------------------------------------------------------------------------------------